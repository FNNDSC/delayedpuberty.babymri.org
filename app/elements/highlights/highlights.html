<link rel="import" href="../../lib-elements/polymer-jsonp/polymer-jsonp.html">

<link rel="import" href="../page/page.html">

<polymer-element name="highlights-element" extends="page-element">
  <template>

    <!-- Important Owl stylesheet -->
    <!-- build:css ../../lib-elements/owl-carousel/owl.carousel.css -->
            <link rel="stylesheet" href="../../bower_components/OwlCarousel/owl-carousel/owl.carousel.css">
    <!-- endbuild -->
    <!-- build:css ../../lib-elements/owl-carousel/owl.theme.css -->
            <link rel="stylesheet" href="../../bower_components/OwlCarousel/owl-carousel/owl.theme.css">
    <!-- endbuild -->

      <div class="container">
        <div id="jumbo" class=" jumbotron fBox" >
        <h2>
          <span class="small">Some of our center</span>
          <span class="large {{name}}">highlights</span>
        </h2>
      </div>
      <div class="row">
        <div class="col-md-2 ">
          <div id='{{name}}-affix' class="fBox">
            <ul id='{{name}}-navigation' class="nav ">
              Navigation
              <template if="{{structure != null}}">
                <template repeat="{{section in structure}}">
                  <li on-tap="{{gotoSection}}">
                    <a id='{{name}}-nav-{{section.index}}' class='{{name}}' data-section='{{section.index}}'>{{section.label}}</a>
                  </li> 
                </template> 
              </template>
            </ul>
          </div>
        </div>
        <div class="col-md-10">
        <div class="fBox">

        <section id="highlights" class="element">
          <div class="title {{name}}">highlights</div>
          <div id="owl-demo" class="owl-carousel">
            <div class="item">
              <a href="http://goo.gl/oML6sw" target="_blank" class="image">
                <img src="../../images/highlights/h1.png">
                <div class="image-info">" Wow! "<br/>" Amazing! "</div>
                <div class="image-caption">Real-time MRI reslicing in the web browser</div>
              </a>
            </div>
            <div class="item">
              <a href="http://goo.gl/oML6sw" target="_blank" class="image">
                <img src="../../images/highlights/h2.png">
                <div class="image-caption">Highlight #2</div>
              </a>
            </div>
            <div class="item">
                <a href="http://goo.gl/oML6sw" target="_blank" class="image">
                  <img src="../../images/highlights/h3.png">
                  <div class="image-caption">Highlight #3</div>
                </a>
            </div>
          </div>
        </section>

        <section id="2014" class="element">
          <div class="title {{name}}">2014</div>
          <template if="{{highlights != null}}">
            <template repeat="{{highlight in highlights.feed.entry}}">
              <template if="{{highlight.gsx$year.$t === '2014'}}">
                <div class="info row" >
                  <div class="tags col-md-1">
                    <div class='row'>
                      <span class="col-md-12 {{highlight.gsx$category.$t}}"><span class='icon {{highlight.gsx$category.$t}}'>{{highlight.gsx$category.$t}}</span></span>
                      <span class="col-md-11 date">{{highlight.gsx$month.$t}}-{{highlight.gsx$day.$t}}</span>
                    </div>
                  </div>
                  <div class="content col-md-11">
                    {{highlight.gsx$content.$t}}
                    <template if="{{highlight.gsx$link.$t != null}}">
                      <a href="{{highlight.gsx$link.$t}}">{{highlight.gsx$linkname.$t}}</a>
                    </template>
                  </div>
                </div>
              </template>
            </template>
          </template>
        </section>
 
        <section id="2013" class="element">
          <div class="title {{name}}">2013</div>
          <template if="{{highlights != null}}">
            <template repeat="{{highlight in highlights.feed.entry}}">
              <template if="{{highlight.gsx$year.$t === '2013'}}">
                <div class="info row" >
                  <div class="tags col-md-1">
                    <div class='row'>
                      <span class="col-md-12 {{highlight.gsx$category.$t}}"><span class='icon {{highlight.gsx$category.$t}}'>{{highlight.gsx$category.$t}}</span></span>
                      <span class="col-md-11 date">{{highlight.gsx$month.$t}}-{{highlight.gsx$day.$t}}</span>
                    </div>
                  </div>
                  <div class="content col-md-11">
                    {{highlight.gsx$content.$t}}
                    <template if="{{highlight.gsx$link.$t != null}}">
                      <a href="{{highlight.gsx$link.$t}}">{{highlight.gsx$linkname.$t}}</a>
                    </template>
                  </div>
                </div>
              </template>
            </template>
          </template>
        </section>

        <section id="2012" class="element">
          <div class="title {{name}}">2012</div>
          <template if="{{highlights != null}}">
            <template repeat="{{highlight in highlights.feed.entry}}">
              <template if="{{highlight.gsx$year.$t === '2012'}}">
                <div class="info row" >
                  <div class="tags col-md-1">
                    <div class='row'>
                      <span class="col-md-12 {{highlight.gsx$category.$t}}"><span class='icon {{highlight.gsx$category.$t}}'>{{highlight.gsx$category.$t}}</span></span>
                      <span class="col-md-11 date">{{highlight.gsx$month.$t}}-{{highlight.gsx$day.$t}}</span>
                    </div>
                  </div>
                  <div class="content col-md-11">
                    {{highlight.gsx$content.$t}}
                    <template if="{{highlight.gsx$link.$t != null}}">
                      <a href="{{highlight.gsx$link.$t}}">{{highlight.gsx$linkname.$t}}</a>
                    </template>
                  </div>
                </div>
              </template>
            </template>
          </template>
        </section>

        <section id="2011" class="element">
          <div class="title {{name}}">2011</div>
          <template if="{{highlights != null}}">
            <template repeat="{{highlight in highlights.feed.entry}}">
              <template if="{{highlight.gsx$year.$t === '2011'}}">
                <div class="info row" >
                  <div class="tags col-md-1">
                    <div class='row'>
                      <span class="col-md-12 {{highlight.gsx$category.$t}}"><span class='icon {{highlight.gsx$category.$t}}'>{{highlight.gsx$category.$t}}</span></span>
                      <span class="col-md-11 date">{{highlight.gsx$month.$t}}-{{highlight.gsx$day.$t}}</span>
                    </div>
                  </div>
                  <div class="content col-md-11">
                    {{highlight.gsx$content.$t}}
                    <template if="{{highlight.gsx$link.$t != null}}">
                      <a href="{{highlight.gsx$link.$t}}">{{highlight.gsx$linkname.$t}}</a>
                    </template>
                  </div>
                </div>
              </template>
            </template>
          </template>
        </section>

    </div>
    </div>

    </div>
    </div>

    <polymer-jsonp auto url="https://spreadsheets.google.com/feeds/list/{{spreadsheet}}/od6/public/values?alt=json-in-script&callback=" response="{{highlights}}"></polymer-jsonp>

  </template>

  <!-- build:js ../../lib-elements/owl-carousel/owl.carousel.min.js -->
  <script src="../../bower_components/OwlCarousel/owl-carousel/owl.carousel.min.js"></script>
  <!-- endbuild -->

  <script>
    Polymer('highlights-element', {
      name:'highlights',
      spreadsheet: '0Asu7h0aKnydhdHlaTndWaUVmOHRpRTMzX3VmWW9VVFE',
      attached: function(){
        this.super();
        var self = this;
        this.onload=function(){self.refresh();};
        
        $('#owl-demo').owlCarousel({
            slideSpeed : 300,
            paginationSpeed : 400,
            singleItem:true,
            autoPlay: 8000,
            stopOnHover: true,
            mouseDrag:false,
            touchDrage:false
          });
      }
    });
  </script>
</polymer-element>
