<link rel="import" href="../../lib-elements/polymer-jsonp/polymer-jsonp.html">

<link rel="import" href="../page/page.html">

<polymer-element name="software-element" extends="page-element">
  <template>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" type="text/css" href="../page/page.css" />
    <link rel="stylesheet" href="software.css">
    <!-- Important Owl stylesheet -->
    <link rel="stylesheet" href="../../styles/owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="../../styles/owl-carousel/owl.theme.css">

      <div class="container">
        <div id="jumbo" class=" jumbotron fBox" >
            <template if="{{softwares == null && cache == null}}">
              <img class="spinner" src="../../images/spinner.gif">
            </template>
            <span class="small">We develop softwares using cutting-edge and open-source</span>
            <span class="large {{name}}">technologies</span>
      </div>
      <div class="row">
        <div class="col-md-2 ">
          <div id='{{name}}-affix'  class="fBox">
            <ul id='{{name}}-navigation' class="nav ">
              Navigation
              <template if="{{structure != null}}">
                <template repeat="{{section in structure}}">
                  <li on-tap="{{gotoSection}}">
                    <a id='{{name}}-nav-{{section.index}}' class='{{name}}' data-section='{{section.index}}'>{{section.label}}</a>
                  </li> 
                </template> 
              </template>
            </ul>
          </div>
        </div>
        <div class="col-md-10">
        <div class="fBox">

      <section id="labbook" class="element"
c>        <template if="{{softwares != null}}">
          <template repeat="{{software in softwares.feed.entry}}">
            <template if="{{software.gsx$id.$t === 'labbook'}}">
              <div id="labbookTitle" class="title {{name}}">{{software.gsx$label.$t}}</div>
            </template>
          </template>
        </template>
        <div id="labbookContent" class="content"></div>
        <div id="owl-demo0" class="slider" style="z-index:10;">
          <div class="item"><img src="../../images/software/chris3.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/chris2.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/chris1.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/chris4.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/chris5.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/chris6.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/chris7.png" alt="To complete..."></div> 
        </div>
      </section>

      <section id="slicedrop" class="element">
        <template if="{{softwares != null}}">
          <template repeat="{{software in softwares.feed.entry}}">
            <template if="{{software.gsx$id.$t === 'slicedrop'}}">
              <div id="slicedropTitle" class="title {{name}}">{{software.gsx$label.$t}}</div>
            </template>
          </template>
        </template>
        <div id="slicedropContent" class="content"></div>
        <div id="owl-demo1" class="slider" style="z-index:10;">
          <div class="item"><img src="../../images/software/slicedrop1.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/slicedrop2.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/slicedrop3.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/slicedrop4.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/slicedrop5.png" alt="To complete..."></div>
        </div>
      </section>

      <section id="xtk" class="element">
        <template if="{{softwares != null}}">
          <template repeat="{{software in softwares.feed.entry}}">
            <template if="{{software.gsx$id.$t === 'xtk'}}">
              <div id="xtkTitle" class="title {{name}}">{{software.gsx$label.$t}}</div>
            </template>
          </template>
        </template>
        <div id="xtkContent" class="content"></div>
        <div id="owl-demo2" class="slider" style="z-index:10;">
          <div class="item"><img src="../../images/software/xtk1.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/xtk2.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/xtk3.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/xtk4.png" alt="To complete..."></div>
          <div class="item"><img src="../../images/software/xtk5.png" alt="To complete..."></div>
        </div>
      </section>

      <section id="more" class="element">
        <template if="{{softwares != null}}">
          <template repeat="{{software in softwares.feed.entry}}">
            <template if="{{software.gsx$id.$t === 'more'}}">
              <div id="moreTitle" class="title {{name}}">{{software.gsx$label.$t}}</div>
            </template>
          </template>
        </template>
        <div id="moreContent" class="content"></div>
      </section>


    </div>
    </div>

    </div>
    </div>
 <template if="{{cache == null && attached == 1 }}">
<polymer-jsonp auto url="https://spreadsheets.google.com/feeds/list/{{spreadsheet}}/od6/public/values?alt=json-in-script&callback=" response="{{softwares}}"></polymer-jsonp>
</template>

  </template>

  <script>
    Polymer('software-element', {
      name:'software',
      spreadsheet: '0Asu7h0aKnydhdEp2SjNBaVU0ajNuZnZPQ3BaVXB3dXc',
      attached: function(){
        this.super();
        var self = this;
        this.onload=function(){self.refresh();};
        $('#owl-demo0').owlCarousel({
            autoPlay: 8000, //Set AutoPlay to 3 seconds
            items : 4,
            itemsDesktop : [1199,3],
            itemsDesktopSmall : [979,3]
          });

          $('#owl-demo1').owlCarousel({
            autoPlay: 9000, //Set AutoPlay to 3 seconds
            items : 4,
            itemsDesktop : [1199,3],
            itemsDesktopSmall : [979,3]
          });

          $('#owl-demo2').owlCarousel(
{            autoPlay: 10000, //Set AutoPlay to 3 seconds
            items : 4,
            itemsDesktop : [1199,3],
            itemsDesktopSmall : [979,3]
          });

        if(this.cache != null){
          this.softwares = this.cache;
        }
        this.attached = 1;
      },
      softwaresChanged: function(){
        if(this.softwares){
            var len = this.softwares.feed.entry.length;
            while (len--) {
              if(this.softwares.feed.entry[len].gsx$id.$t == 'xtk'){
                this.$.xtkContent.innerHTML = this.softwares.feed.entry[len].gsx$description.$t + '<div class="technology" >Technology: ' + this.softwares.feed.entry[len].gsx$technology.$t +'</div><div class="buttons"><div id="slicedropLink" class="link"><a href=" '+this.softwares.feed.entry[len].gsx$link.$t+'" target="_blank">Try it!</a></div><div id="slicedropSource" class="source"><a href="'+ this.softwares.feed.entry[len].gsx$source.$t+'" target="_blank">Get the code!</a></div></div>';
      }

                    if(this.softwares.feed.entry[len].gsx$id.$t == 'labbook'){
                this.$.labbookContent.innerHTML = this.softwares.feed.entry[len].gsx$description.$t + '<div class="technology" >Technology: ' + this.softwares.feed.entry[len].gsx$technology.$t +'</div><div class="buttons"><div id="labbookLink" class="link"><a href=" '+this.softwares.feed.entry[len].gsx$link.$t+'" target="_blank">Try it!</a></div><div id="labbookSource" class="source"><a href="'+ this.softwares.feed.entry[len].gsx$source.$t+'" target="_blank">Get the code!</a></div></div>';
      }

                          if(this.softwares.feed.entry[len].gsx$id.$t == 'slicedrop'){
                this.$.slicedropContent.innerHTML = this.softwares.feed.entry[len].gsx$description.$t + '<div class="technology" >Technology: ' + this.softwares.feed.entry[len].gsx$technology.$t +'</div><div class="buttons"><div id="slicedropLink" class="link"><a href=" '+this.softwares.feed.entry[len].gsx$link.$t+'" target="_blank">Try it!</a></div><div id="slicedropSource" class="source"><a href="'+ this.softwares.feed.entry[len].gsx$source.$t+'" target="_blank">Get the code!</a></div></div>';
      }

                          if(this.softwares.feed.entry[len].gsx$id.$t == 'more'){
                this.$.moreContent.innerHTML = this.softwares.feed.entry[len].gsx$description.$t + '<div class="technology" >Technology: ' + this.softwares.feed.entry[len].gsx$technology.$t +'</div><div class="buttons"><div id="moreLink" class="link"><a href=" '+this.softwares.feed.entry[len].gsx$link.$t+'" target="_blank">Try it!</a></div><div id="moreSource" class="source"><a href="'+ this.softwares.feed.entry[len].gsx$source.$t+'" target="_blank">Get the code!</a></div></div>';
      }

    }

    this.cache = this.softwares; 
  }
}
    });
  </script>
</polymer-element>
